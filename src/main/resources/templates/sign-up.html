<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/main.css">
    <title>Sign-up page</title>
</head>
<body>
<div class="navbar-light">
    <div class="container">
        <a class="logo logo--dark" href="#">
            <div class="logo-img logo-img--dark">
            <span>
              <img alt="" src="/static/img/logo-dark.png">
            </span>
            </div>
            <div class="logo-text">
                <p class="logo-text-abbr">IBA</p>
                <p class="logo-text-company-name">Tech Academy</p>
            </div>
        </a>
    </div>
</div>
<main class="start-content">
    <div class="container">
        <div class="start-content-row">
            <div class="start-content-welcome-img-b">
                <img alt="#" class="start-content-welcome-img" src="/static/img/start-page-promo.png">
            </div>
            <div class="start-content-welcome-text-b">
                <h1 class="welcome-title">Create an account</h1>
                <p class="welcome-text">Create your account, it takes less than a minute. If you already have an account <a class='text-link' href="login.html">Login</a>
                </p>
                <div>
                    <p th:if="${ex != null}" th:text="${ex.message}" class="global-error"></p>
                </div>
                <form class="sign-up-form" id="sign-up-form" th:object="${registerUserDto}" th:action="@{/signup}" method="post">
                    <div class="text-input-container @@complete">
                <span class="text-input-icon">
                  <span>
                    <img alt="" src="/static/img/icons/user.png">
                  </span>
                </span>
                        <input class="form-control @@complete" placeholder="First name" type="text" th:field="*{firstName}" required>
                    </div>
                    <div class="text-input-container @@complete">
                <span class="text-input-icon">
                  <span class="text-input-icon">
                    <span>
                      <img alt="" src="/static/img/icons/user.png">
                    </span>
                  </span>
                </span>
                        <input class="form-control @@complete" placeholder="Last name" type="text" value="" th:field="*{lastName}" required>
                    </div>
                    <div class="text-input-container @@complete">
                <span class="text-input-icon">
                  <span>
                    <img alt="" src="/static/img/icons/email.png">
                  </span>
                </span>
                        <input class="form-control @@complete" placeholder="Email address" type="email" value="" th:field="*{emailAddress}" required>
                    </div>
                    <div class="text-input-container @@complete">
                <span class="text-input-icon">
                  <span>
                    <img alt="" src="/static/img/icons/password.png">
                  </span>
                </span>
                        <input id="password" name="password" class="form-control @@complete" placeholder="Password" type="password" value="" th:field="*{password}" required>
                    </div>
                    <div class="text-input-container @@complete">
                <span class="text-input-icon">
                  <span>
                    <img alt="" src="/static/img/icons/password.png">
                  </span>
                </span>
                        <input id="confirm-password" name="confirm-password" class="form-control @@complete" placeholder="Confirm password" type="password" value="" required>
                    </div>
                    <div id="error-message" class="password-match-error">Passwords do not match.</div>
                    <div class="button-container">
                        <button type="submit" id="submit-btn" class="btn btn-dark">Create Account</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</main>
<script>
    const passwordField = document.getElementById('password');
    const confirmPasswordField = document.getElementById('confirm-password');
    const errorMessage = document.getElementById('error-message');
    const submitButton = document.getElementById('submit-btn');
    //check if passwords match, if not show error
    confirmPasswordField.addEventListener('input', () => {
        if (confirmPasswordField.value !== '' && passwordField.value !== confirmPasswordField.value) {
            errorMessage.style.display = 'block';
            submitButton.disabled = true;
        } else {
            errorMessage.style.display = 'none';
            submitButton.disabled = false;
        }
    });
</script>
</body>
</html>